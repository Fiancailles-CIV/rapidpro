-extends "channels/channel_claim_form.html"
-load i18n compress temba

-block pre-form
  -blocktrans trimmed with name=brand.name
    You can connect a <a href="https://messagebird.com/en/">Messagebird</a> Account to your {{ name}} account
    to automate sending and receiving messages via Messagebird phone numbers and shortcodes.

  .mt-4
    -blocktrans trimmed with format='<div class="code inline py-1">channel-uuid/user-uuid</div>'
      Each message sent to the channel will have a URN in the format {{ format }} where the channel UUID is the FreshChat channel's UUID.

  %ol.steps.card
    %li
      -blocktrans trimmed
        In the Messagebird Dashboard, under SMS, API Getting Started, select Show on your live key and enter it below.
    %li
      -blocktrans trimmed
        In the Messagebird Dashboard again, select Developers, API Settings and Signing Key. Click Show Key and paste it below. This assures all webhook request from Messagebird will be authenticated.
    %li
      -blocktrans trimmed
        Lastly, you'll need the Phone number or shortcode that {{ name }} will use when it sends SMS/MMS message. This is available via
        the <a href="https://dashboard.messagebird.com/en-us/numbers">My Numbers</a> section of the Messagebird API.
    %li
      -blocktrans trimmed
        Once you press Submit below with all the information configured, the confirmation page will give you the URL to use for the Messagebird Webhooks.
        Create a Flow in the Flowbuilder from a Template, and select the "Call HTTP endpoint with SMS" templatw
        In your created flow, select the same phone number you've configured here, and then under the Forward to URL node, 
        set the content type header to JSON, and then Enter the URL you'll get on the confirmation page here.

-block extra-style
  {{ block.super }}

  :css
    .info {
      width: 800px;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom:15px;
    }

    #id_auth_token {
      width: 340px;
    }
